<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>helios: helios::engine::FramePacer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">helios<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">API Documentation</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classhelios_1_1engine_1_1FramePacer.html','','classhelios_1_1engine_1_1FramePacer-members'); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
<div id="container"><div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">helios::engine::FramePacer Class Reference<span class="mlabels"><span class="mlabel export">export</span></span><div class="ingroups">module <a class="el" href="module__helios_8engine_8FramePacer.html">helios.engine.FramePacer</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Controls and maintains a target frame rate through precise timing and pacing.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6cfb7ba87a5da0cb5ab0a7c0ff5938fd" id="r_a6cfb7ba87a5da0cb5ab0a7c0ff5938fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6cfb7ba87a5da0cb5ab0a7c0ff5938fd">FramePacer</a> (std::unique_ptr&lt; <a class="el" href="classhelios_1_1util_1_1time_1_1Stopwatch.html">helios::util::time::Stopwatch</a> &gt; stopwatch)</td></tr>
<tr class="memdesc:a6cfb7ba87a5da0cb5ab0a7c0ff5938fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a> with the given stopwatch.  <br /></td></tr>
<tr class="memitem:ab6c8eedb96c5252dd75335e67cc082d1" id="r_ab6c8eedb96c5252dd75335e67cc082d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6c8eedb96c5252dd75335e67cc082d1">setTargetFps</a> (float fps)</td></tr>
<tr class="memdesc:ab6c8eedb96c5252dd75335e67cc082d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the desired target frame rate.  <br /></td></tr>
<tr class="memitem:af108f079857c8a5cbbb674bfdd87fb47" id="r_af108f079857c8a5cbbb674bfdd87fb47"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af108f079857c8a5cbbb674bfdd87fb47">getTargetFps</a> () const noexcept</td></tr>
<tr class="memdesc:af108f079857c8a5cbbb674bfdd87fb47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current target frame rate.  <br /></td></tr>
<tr class="memitem:a6bd8aee9b1656f7e9731d74909823f14" id="r_a6bd8aee9b1656f7e9731d74909823f14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bd8aee9b1656f7e9731d74909823f14">beginFrame</a> ()</td></tr>
<tr class="memdesc:a6bd8aee9b1656f7e9731d74909823f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks the beginning of a new frame.  <br /></td></tr>
<tr class="memitem:a32ee1e380de39424a708a979a982d19d" id="r_a32ee1e380de39424a708a979a982d19d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structhelios_1_1engine_1_1FrameStats.html">FrameStats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32ee1e380de39424a708a979a982d19d">sync</a> ()</td></tr>
<tr class="memdesc:a32ee1e380de39424a708a979a982d19d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronizes frame timing and returns frame statistics.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Controls and maintains a target frame rate through precise timing and pacing. </p>
<p>The <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a> class utilizes a `Stopwatch` to measure frame execution time and introduces necessary sleep delays to maintain a consistent target frame rate. It returns detailed timing statistics via the `FrameStats` structure upon synchronization.</p>
<p>The pacing mechanism helps in achieving smoother frame delivery by minimizing jitter, although strict adherence depends on the OS scheduler's precision.</p>
<dl class="section note"><dt>Note</dt><dd>If `targetFps` is set to 0.0f, no frame pacing is performed, and frames run as fast as the hardware and OS allow (unlocked framerate).</dd></dl>
<dl class="section user"><dt>Usage Example:</dt><dd>```cpp auto stopwatch = std::make_unique&lt;helios::util::time::Stopwatch&gt;(); <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a> pacer(std::move(stopwatch)); pacer.setTargetFps(60.0f);</dd></dl>
<p>while (running) { pacer.beginFrame(); // ... game logic and rendering ... <a class="el" href="structhelios_1_1engine_1_1FrameStats.html" title="Contains timing statistics for a single frame.">FrameStats</a> stats = pacer.sync(); } ``` </p>

<p class="definition">Definition at line <a class="el" href="FramePacer_8ixx_source.html#l00043">43</a> of file <a class="el" href="FramePacer_8ixx_source.html">FramePacer.ixx</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6cfb7ba87a5da0cb5ab0a7c0ff5938fd" name="a6cfb7ba87a5da0cb5ab0a7c0ff5938fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cfb7ba87a5da0cb5ab0a7c0ff5938fd">&#9670;&#160;</a></span>FramePacer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">helios::engine::FramePacer::FramePacer </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classhelios_1_1util_1_1time_1_1Stopwatch.html">helios::util::time::Stopwatch</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>stopwatch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span><span class="mlabel export">export</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a> with the given stopwatch. </p>
<p>Initializes a new <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a> instance in unlimited FPS mode (targetFps = 0.0f).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stopwatch</td><td>Unique pointer to a valid `Stopwatch` instance. Ownership is transferred to the <a class="el" href="classhelios_1_1engine_1_1FramePacer.html" title="Controls and maintains a target frame rate through precise timing and pacing.">FramePacer</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a6bd8aee9b1656f7e9731d74909823f14" name="a6bd8aee9b1656f7e9731d74909823f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd8aee9b1656f7e9731d74909823f14">&#9670;&#160;</a></span>beginFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void helios::engine::FramePacer::beginFrame </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel export">export</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks the beginning of a new frame. </p>
<p>Starts the internal stopwatch to begin measuring the frame's work time. This method must be called at the very beginning of each frame cycle, before any game logic, physics, or rendering operations. </p>

<p class="reference">References <a class="el" href="#a6bd8aee9b1656f7e9731d74909823f14">beginFrame()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a6bd8aee9b1656f7e9731d74909823f14">beginFrame()</a>.</p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="classhelios_1_1engine_1_1FramePacer_a6bd8aee9b1656f7e9731d74909823f14_cgraph.svg" width="208" height="75"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="classhelios_1_1engine_1_1FramePacer_a6bd8aee9b1656f7e9731d74909823f14_icgraph.svg" width="208" height="75"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af108f079857c8a5cbbb674bfdd87fb47" name="af108f079857c8a5cbbb674bfdd87fb47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af108f079857c8a5cbbb674bfdd87fb47">&#9670;&#160;</a></span>getTargetFps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float helios::engine::FramePacer::getTargetFps </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span><span class="mlabel export">export</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the current target frame rate. </p>
<p>Returns the frame rate target that has been set for pacing, expressed in Frames Per Second (FPS). If the target frame rate is set to 0.0f, frame pacing is disabled, and the frame rate is unlocked.</p>
<dl class="section return"><dt>Returns</dt><dd>The target frame rate in FPS.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>A return value of 0.0f indicates that the frame pacing mechanism is not active. </dd></dl>

</div>
</div>
<a id="ab6c8eedb96c5252dd75335e67cc082d1" name="ab6c8eedb96c5252dd75335e67cc082d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6c8eedb96c5252dd75335e67cc082d1">&#9670;&#160;</a></span>setTargetFps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void helios::engine::FramePacer::setTargetFps </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>fps</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel export">export</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the desired target frame rate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fps</td><td>The target frame rate in Frames Per Second (FPS). Set to 0.0f to disable pacing (unlocked framerate). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a32ee1e380de39424a708a979a982d19d" name="a32ee1e380de39424a708a979a982d19d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ee1e380de39424a708a979a982d19d">&#9670;&#160;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structhelios_1_1engine_1_1FrameStats.html">FrameStats</a> helios::engine::FramePacer::sync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span><span class="mlabel export">export</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Synchronizes frame timing and returns frame statistics. </p>
<p>Measures the elapsed work time since `beginFrame()`. If a target FPS is set and the work time is less than the target frame duration, this method sleeps the current thread to meet the target timing.</p>
<dl class="section return"><dt>Returns</dt><dd>A `FrameStats` structure containing the total frame time (including wait), the actual work time (CPU processing), and the wait time (idle).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If `targetFps` is 0.0f or the frame took longer than the target duration, no sleeping occurs, and `waitTime` in the returned stats will be 0.0f.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo</a></b></dt><dd>Implement hybrid spinning for the last millisecond of the wait time to improve timing precision and mitigate OS scheduler wake-up latency. </dd></dl>

<p class="reference">References <a class="el" href="#a32ee1e380de39424a708a979a982d19d">sync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a32ee1e380de39424a708a979a982d19d">sync()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="classhelios_1_1engine_1_1FramePacer_a32ee1e380de39424a708a979a982d19d_cgraph.svg" width="208" height="75"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;"><span class="dynarrow"><span class="arrowhead closed"></span></span>Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="classhelios_1_1engine_1_1FramePacer_a32ee1e380de39424a708a979a982d19d_icgraph.svg" width="208" height="75"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/helios/engine/<a class="el" href="FramePacer_8ixx_source.html">FramePacer.ixx</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacehelios.html">helios</a></li><li class="navelem"><a href="namespacehelios_1_1engine.html">engine</a></li><li class="navelem"><a href="classhelios_1_1engine_1_1FramePacer.html">FramePacer</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for helios by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
